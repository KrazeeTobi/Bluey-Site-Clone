!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=54)}([function(t,e,n){n(50)("asyncIterator")},function(t,e,n){"use strict";var i=n(5),r=n(8),s=n(12),a=n(7),o=n(17),c=n(70).KEY,l=n(15),u=n(20),h=n(32),f=n(16),p=n(4),d=n(51),y=n(50),g=n(71),m=n(72),v=n(14),b=n(6),w=n(13),S=n(27),O=n(23),k=n(43),P=n(73),x=n(33),C=n(11),_=n(18),D=x.f,I=C.f,j=P.f,T=i.Symbol,A=i.JSON,B=A&&A.stringify,E=p("_hidden"),M=p("toPrimitive"),R={}.propertyIsEnumerable,H=u("symbol-registry"),X=u("symbols"),F=u("op-symbols"),z=Object.prototype,Y="function"==typeof T,G=i.QObject,L=!G||!G.prototype||!G.prototype.findChild,W=s&&l(function(){return 7!=k(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=D(z,e);i&&delete z[e],I(t,e,n),i&&t!==z&&I(z,e,i)}:I,N=function(t){var e=X[t]=k(T.prototype);return e._k=t,e},V=Y&&"symbol"==typeof T.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof T},$=function(t,e,n){return t===z&&$(F,e,n),v(t),e=S(e,!0),v(n),r(X,e)?(n.enumerable?(r(t,E)&&t[E][e]&&(t[E][e]=!1),n=k(n,{enumerable:O(0,!1)})):(r(t,E)||I(t,E,O(1,{})),t[E][e]=!0),W(t,e,n)):I(t,e,n)},Q=function(t,e){v(t);for(var n,i=g(e=w(e)),r=0,s=i.length;s>r;)$(t,n=i[r++],e[n]);return t},U=function(t){var e=R.call(this,t=S(t,!0));return!(this===z&&r(X,t)&&!r(F,t))&&(!(e||!r(this,t)||!r(X,t)||r(this,E)&&this[E][t])||e)},q=function(t,e){if(t=w(t),e=S(e,!0),t!==z||!r(X,e)||r(F,e)){var n=D(t,e);return!n||!r(X,e)||r(t,E)&&t[E][e]||(n.enumerable=!0),n}},J=function(t){for(var e,n=j(w(t)),i=[],s=0;n.length>s;)r(X,e=n[s++])||e==E||e==c||i.push(e);return i},K=function(t){for(var e,n=t===z,i=j(n?F:w(t)),s=[],a=0;i.length>a;)!r(X,e=i[a++])||n&&!r(z,e)||s.push(X[e]);return s};Y||(o((T=function(){if(this instanceof T)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(n){this===z&&e.call(F,n),r(this,E)&&r(this[E],t)&&(this[E][t]=!1),W(this,t,O(1,n))};return s&&L&&W(z,t,{configurable:!0,set:e}),N(t)}).prototype,"toString",function(){return this._k}),x.f=q,C.f=$,n(53).f=P.f=J,n(25).f=U,n(52).f=K,s&&!n(22)&&o(z,"propertyIsEnumerable",U,!0),d.f=function(t){return N(p(t))}),a(a.G+a.W+a.F*!Y,{Symbol:T});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;Z.length>tt;)p(Z[tt++]);for(var et=_(p.store),nt=0;et.length>nt;)y(et[nt++]);a(a.S+a.F*!Y,"Symbol",{for:function(t){return r(H,t+="")?H[t]:H[t]=T(t)},keyFor:function(t){if(!V(t))throw TypeError(t+" is not a symbol!");for(var e in H)if(H[e]===t)return e},useSetter:function(){L=!0},useSimple:function(){L=!1}}),a(a.S+a.F*!Y,"Object",{create:function(t,e){return void 0===e?k(t):Q(k(t),e)},defineProperty:$,defineProperties:Q,getOwnPropertyDescriptor:q,getOwnPropertyNames:J,getOwnPropertySymbols:K}),A&&a(a.S+a.F*(!Y||l(function(){var t=T();return"[null]"!=B([t])||"{}"!=B({a:t})||"{}"!=B(Object(t))})),"JSON",{stringify:function(t){for(var e,n,i=[t],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=e=i[1],(b(e)||void 0!==t)&&!V(t))return m(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!V(e))return e}),i[1]=e,B.apply(A,i)}}),T.prototype[M]||n(10)(T.prototype,M,T.prototype.valueOf),h(T,"Symbol"),h(Math,"Math",!0),h(i.JSON,"JSON",!0)},function(t,e,n){var i=n(7);i(i.S,"Object",{setPrototypeOf:n(74).set})},function(t,e,n){var i=n(33),r=n(47),s=n(8),a=n(7),o=n(6),c=n(14);a(a.S,"Reflect",{get:function t(e,n){var a,l,u=arguments.length<3?e:arguments[2];return c(e)===u?e[n]:(a=i.f(e,n))?s(a,"value")?a.value:void 0!==a.get?a.get.call(u):void 0:o(l=r(e))?t(l,n,u):void 0}})},function(t,e,n){var i=n(20)("wks"),r=n(16),s=n(5).Symbol,a="function"==typeof s;(t.exports=function(t){return i[t]||(i[t]=a&&s[t]||(a?s:r)("Symbol."+t))}).store=i},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var i=n(5),r=n(21),s=n(10),a=n(17),o=n(41),c=function(t,e,n){var l,u,h,f,p=t&c.F,d=t&c.G,y=t&c.S,g=t&c.P,m=t&c.B,v=d?i:y?i[e]||(i[e]={}):(i[e]||{}).prototype,b=d?r:r[e]||(r[e]={}),w=b.prototype||(b.prototype={});for(l in d&&(n=e),n)h=((u=!p&&v&&void 0!==v[l])?v:n)[l],f=m&&u?o(h,i):g&&"function"==typeof h?o(Function.call,h):h,v&&a(v,l,h,t&c.U),b[l]!=h&&s(b,l,f),g&&w[l]!=h&&(w[l]=h)};i.core=r,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var i=n(11).f,r=Function.prototype,s=/^\s*function ([^ (]*)/;"name"in r||n(12)&&i(r,"name",{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(t){return""}}})},function(t,e,n){var i=n(11),r=n(23);t.exports=n(12)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(14),r=n(39),s=n(27),a=Object.defineProperty;e.f=n(12)?Object.defineProperty:function(t,e,n){if(i(t),e=s(e,!0),i(n),r)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){t.exports=!n(15)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(57),r=n(29);t.exports=function(t){return i(r(t))}},function(t,e,n){var i=n(6);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e,n){var i=n(5),r=n(10),s=n(8),a=n(16)("src"),o=n(59),c=(""+o).split("toString");n(21).inspectSource=function(t){return o.call(t)},(t.exports=function(t,e,n,o){var l="function"==typeof n;l&&(s(n,"name")||r(n,"name",e)),t[e]!==n&&(l&&(s(n,a)||r(n,a,t[e]?""+t[e]:c.join(String(e)))),t===i?t[e]=n:o?t[e]?t[e]=n:r(t,e,n):(delete t[e],r(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||o.call(this)})},function(t,e,n){var i=n(44),r=n(31);t.exports=Object.keys||function(t){return i(t,r)}},function(t,e,n){"use strict";n.d(e,"a",function(){return l});n(0),n(1),n(3),n(2);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=o(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(t){function e(t,n,r,a){var c,l,u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),l=this,c=!(u=o(e).call(this,t,n,r,"hand"))||"object"!==i(u)&&"function"!=typeof u?s(l):u,t.add.existing(s(c)),c.depth=25,c.scene=t,c.offsetX=.35*c.width,c.offsetY=.35*c.height,c.x+=c.offsetX,c.y+=c.offsetY,c.startScaleX=c.scaleX,c.startScaleY=c.scaleY,c.startX=c.x,c.startY=c.y,c.targetX=a.x,c.targetY=a.y,c.bgWidth=a.width,c.bgHeight=a.height,c.emitter=new Phaser.Events.EventEmitter,c.resetAnims(),c}var n,l,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,Phaser.GameObjects.Image),n=e,(l=[{key:"resetAnims",value:function(){this.animIndex=0,this.scaleX=0,this.scaleY=0,this.x=this.startX,this.y=this.startY,void 0!==this.handTween&&(this.handTween.stop(),this.handTween=void 0)}},{key:"setAnims",value:function(t){this.anims=t,this.resetAnims()}},{key:"start",value:function(){this.nextAnim()}},{key:"handleAnimComplete",value:function(){void 0!==this.anims?(this.animIndex>=this.anims.length-1?(this.emitter.emit("stepComplete"),this.resetAnims()):this.animIndex=(this.animIndex+1)%this.anims.length,this.nextAnim()):this.resetAnims()}},{key:"nextAnim",value:function(){var t=this.anims[this.animIndex];void 0!==this.handTween&&(this.handTween.stop(),this.handTween=void 0);var e=void 0!==t.delay?t.delay:0;"move"===t.type?this.moveHand(t.target.x,t.target.y,t.time,t.easing,e):"tap"===t.type?this.tapHand(t.time,t.easing,e):"scale"===t.type&&this.scaleHand(t.scale,t.scale,t.time,t.easing,e)}},{key:"moveHand",value:function(t,e,n,i,r){var s=this,a=this.targetX+t*this.bgWidth+this.offsetX,o=this.targetY-e*this.bgHeight+this.offsetY;this.handTween=this.scene.tweens.add({targets:this,x:a,y:o,duration:n,ease:i,delay:r,onComplete:function(){s.handleAnimComplete()}})}},{key:"scaleHand",value:function(t,e,n,i,r){var s=this;this.handTween=this.scene.tweens.add({targets:this,scaleX:this.startScaleX*t,scaleY:this.startScaleY*e,duration:n,ease:i,delay:r,onComplete:function(){s.handleAnimComplete()}})}},{key:"tapHand",value:function(t,e,n){var i=this;this.handTween=this.scene.tweens.add({targets:this,scaleX:.85*this.startScaleX,scaleY:.85*this.startScaleY,duration:t,yoyo:!0,ease:e,delay:n,onComplete:function(){i.handleAnimComplete()}})}},{key:"tapHandAtPoint",value:function(t,e){var n=this,i=t+50,r=this.targetY-e*this.bgHeight+this.offsetY;this.x=i,this.y=r+100,this.handTween=this.scene.tweens.add({targets:this,scaleX:this.startScaleX,scaleY:this.startScaleY,duration:750,ease:"Back.easeOut",delay:0}),this.handTween=this.scene.tweens.add({targets:this,scaleX:.85*this.startScaleX,scaleY:.85*this.startScaleY,duration:200,ease:"Quad.easeInOut",delay:750}),this.handTween=this.scene.tweens.add({targets:this,scaleX:this.startScaleX,scaleY:this.startScaleY,duration:200,ease:"Quad.easeInOut",delay:950}),this.handTween=this.scene.tweens.add({targets:this,scaleX:0*this.startScaleX,scaleY:0*this.startScaleY,duration:750,ease:"Back.easeIn",delay:1150,onComplete:function(){n.handleAnimComplete()}})}},{key:"destroy",value:function(){void 0!==this.handTween&&(this.handTween.stop(),this.handTween=void 0),this.scene=null,this.animations=null,a(o(e.prototype),"destroy",this).call(this)}}])&&r(n.prototype,l),u&&r(n,u),e}()},function(t,e,n){var i=n(21),r=n(5),s=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,e){return s[t]||(s[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:n(22)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e){var n=t.exports={version:"2.6.5"};"number"==typeof __e&&(__e=n)},function(t,e){t.exports=!1},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){e.f={}.propertyIsEnumerable},function(t){t.exports={a:"Bluey: Magic Xylophone",c:"1.0.0",b:"https://example.com/"}},function(t,e,n){var i=n(6);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports={}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var i=n(20)("keys"),r=n(16);t.exports=function(t){return i[t]||(i[t]=r(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var i=n(11).f,r=n(8),s=n(4)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,s)&&i(t,s,{configurable:!0,value:e})}},function(t,e,n){var i=n(25),r=n(23),s=n(13),a=n(27),o=n(8),c=n(39),l=Object.getOwnPropertyDescriptor;e.f=n(12)?l:function(t,e){if(t=s(t),e=a(e,!0),c)try{return l(t,e)}catch(t){}if(o(t,e))return r(!i.f.call(t,e),t[e])}},function(t,e,n){"use strict";var i=n(7),r=n(42),s=n(48),a=n(15),o=[].sort,c=[1,2,3];i(i.P+i.F*(a(function(){c.sort(void 0)})||!a(function(){c.sort(null)})||!n(80)(o)),"Array",{sort:function(t){return void 0===t?o.call(s(this)):o.call(s(this),r(t))}})},function(t,e,n){"use strict";n.d(e,"a",function(){return l});n(0),n(1),n(3),n(2);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=o(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(t){function e(t,n){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a,c,l=t.cameras.main.width,u=t.cameras.main.height;a=this,c=o(e).call(this,t,l/2,u/2,"pause_popup"),(r=!c||"object"!==i(c)&&"function"!=typeof c?s(a):c).setDepth(20),r.overlay=t.add.image(0,0,"white"),r.overlay.setOrigin(0,0),r.overlay.setDisplaySize(l,u),r.overlay.setDepth(r.depth-1),r.overlay.tint="#000000",r.overlay.alpha=0,r.scene=t,r.paddingX=100,r.paddingY=230,r.setOrigin(.5),r.scaleX=1.2,r.scaleY=1.2,r.alpha=0,r.active=!1,r.emitter=new Phaser.Events.EventEmitter,n.add(s(r),!0),r.title=t.add.bitmapText(t.cameras.main.width/2,t.cameras.main.height/2-135,"HelloHeadline","Paused");var h=r.title;h.setFontSize(110),h.setOrigin(.5),n.add(h),h.alpha=0,h.setDepth(r.depth+1),r.playBtn=t.add.sprite(t.cameras.main.width/2,t.cameras.main.height/2+30,"startBtn");var f=r.playBtn;f.setInteractive({useHandCursor:!0}).on("pointerdown",function(){return r.handlePlayButtonDown()}),f.alpha=0,n.add(f),f.setDepth(r.depth+1);var p="sound_"+(!1===r.scene.mute?"on":"off");r.muteBtn=t.add.sprite(t.cameras.main.width/2-r.paddingX,t.cameras.main.height/2+r.paddingY,p);var d=r.muteBtn;d.setInteractive({useHandCursor:!0}).on("pointerdown",function(){return r.handleMuteButtonDown()}),d.alpha=0,n.add(d),d.setDepth(r.depth+1),r.helpBtn=t.add.sprite(t.cameras.main.width/2+r.paddingX,t.cameras.main.height/2+r.paddingY,"helpBtn");var y=r.helpBtn;return y.setInteractive({useHandCursor:!0}).on("pointerdown",function(){return r.handleHelpButtonDown()}),y.alpha=0,n.add(y),y.setDepth(r.depth+1),r}var n,l,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,Phaser.GameObjects.Sprite),n=e,(l=[{key:"show",value:function(t){void 0!==this.btnTween&&(this.btnTween.stop(),this.btnTween=void 0),this.muteBtn.setTexture("sound_"+(!1===this.scene.sound.mute?"on":"off")),this.active=!0,this.scaleX=1.2,this.scaleY=1.2,t.tweens.add({targets:this.overlay,alpha:.5,ease:"Cubic",duration:150}),this.btnTween=t.tweens.add({targets:[this,this.title,this.playBtn,this.muteBtn,this.helpBtn],alpha:1,scaleX:1,scaleY:1,ease:"Cubic",duration:150,onComplete:this.onShown})}},{key:"onShown",value:function(){void 0!==this.emitter&&this.emitter.emit("gamePaused")}},{key:"onHidden",value:function(){}},{key:"hide",value:function(t){t.tweens.add({targets:this.overlay,alpha:0,ease:"Cubic",duration:150}),void 0!==this.btnTween&&(this.btnTween.stop(),this.btnTween=void 0),t.tweens.add({targets:[this,this.title,this.playBtn,this.muteBtn,this.helpBtn],scaleX:1,scaleY:1,alpha:0,ease:"Cubic",duration:150,onComplete:this.onHidden}),this.active=!1}},{key:"handlePlayButtonDown",value:function(){this.scene.paused=!1,void 0!==this.emitter&&this.emitter.emit("gameResumed"),this.hide(this.scene)}},{key:"handleMuteButtonDown",value:function(){var t=!0!==this.scene.mute;this.scene.toggleMute(t),this.muteBtn.setTexture("sound_"+(0==this.scene.mute?"on":"off"))}},{key:"handleHelpButtonDown",value:function(){this.hide(this.scene),this.emitter.emit("helpRequested")}},{key:"destroy",value:function(){a(o(e.prototype),"destroy",this).call(this)}}])&&r(n.prototype,l),u&&r(n,u),e}()},function(t,e,n){"use strict";n.d(e,"a",function(){return u});n(0),n(1),n(3),n(2);var i=n(19);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t,e,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=function(t){function e(t,n,s){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l,u,h=t.cameras.main.width,f=t.cameras.main.height;l=this,u=c(e).call(this,t,h/2,f/2,"help_popup"),(o=!u||"object"!==r(u)&&"function"!=typeof u?a(l):u).setDepth(20),o.overlay=t.add.image(0,0,"white"),o.overlay.setOrigin(0,0),o.overlay.setDisplaySize(h,f),o.overlay.setDepth(o.depth-1),o.overlay.tint="#000000",o.overlay.alpha=0,o.scene=t,o.paddingX=350,o.paddingY=230,o.setOrigin(.5),o.scaleX=1.2,o.scaleY=1.2,o.alpha=0,o.active=!1,o.emitter=new Phaser.Events.EventEmitter,n.add(a(o),!0);var p=t.cameras.main.width/2,d=t.cameras.main.height/2;o.title=t.add.bitmapText(p,d-185,"HelloHeadline","How To Play");var y=o.title;y.setFontSize(65),y.setOrigin(.5),n.add(y),y.alpha=0,y.setDepth(o.depth+1),o.playBtn=t.add.sprite(p+o.paddingX,d+o.paddingY,"playBtn");var g=o.playBtn;return g.setInteractive({useHandCursor:!0}).on("pointerdown",function(){return o.handlePlayButtonDown()}),g.alpha=0,n.add(g),g.setDepth(o.depth+1),o.bg=t.add.image(p,d+20,s.steps[0].image),o.bg.setDepth(o.depth+1),o.bg.alpha=0,o.animData=s,o.helpIdx=0,o.helpHand=new i.a(t,p,d+150,o.bg),o.helpHand.emitter.on("stepComplete",function(){return o.nextHelp()},a(o)),n.add(o.helpHand),o.helpHand.setDepth(o.depth+2),o.helpHand.alpha=1,o}var n,u,h;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,Phaser.GameObjects.Sprite),n=e,(u=[{key:"nextHelp",value:function(){this.bg.setTexture(this.animData.steps[this.helpIdx].image),this.helpHand.setAnims(this.animData.steps[this.helpIdx].anims),this.helpHand.start(),this.helpIdx=(this.helpIdx+1)%this.animData.steps.length}},{key:"show",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];void 0!==this.btnTween&&(this.btnTween.stop(),this.btnTween=void 0),this.active=!0,this.helpIdx=0,this.bg.setTexture(this.animData.steps[this.helpIdx].image),this.helpHand.setAnims(this.animData.steps[this.helpIdx].anims),this.helpHand.start(),n?(this.scaleX=1.2,this.scaleY=1.2,t.tweens.add({targets:this.overlay,alpha:.5,ease:"Cubic",duration:150}),this.btnTween=t.tweens.add({targets:[this,this.title,this.playBtn,this.bg],alpha:1,scaleX:1,scaleY:1,ease:"Cubic",duration:150,onComplete:function(){e.onShown()}})):(this.overlay.alpha=.5,this.alpha=1,this.title.alpha=1,this.playBtn.alpha=1,this.bg.alpha=1,this.scaleX=1,this.scaleY=1,this.onShown())}},{key:"onShown",value:function(){void 0!==this.emitter&&this.emitter.emit("gamePaused"),void 0===this.helpHand&&(this.helpHand=new i.a(this.scene,screenX,screenY+150,this.bg)),this.nextHelp()}},{key:"onHidden",value:function(){this.helpHand.resetAnims()}},{key:"hide",value:function(t){var e=this;t.tweens.add({targets:this.overlay,alpha:0,ease:"Cubic",duration:150}),void 0!==this.btnTween&&(this.btnTween.stop(),this.btnTween=void 0),t.tweens.add({targets:[this,this.title,this.playBtn,this.bg],scaleX:1,scaleY:1,alpha:0,ease:"Cubic",duration:150,onComplete:function(){e.onHidden()}}),this.active=!1}},{key:"handlePlayButtonDown",value:function(){this.scene.paused=!1,void 0!==this.emitter&&this.emitter.emit("gameResumed"),this.hide(this.scene)}},{key:"destroy",value:function(){o(c(e.prototype),"destroy",this).call(this)}}])&&s(n.prototype,u),h&&s(n,h),e}()},function(t,e,n){"use strict";var i=n(38),r=n(56),s=n(28),a=n(13);t.exports=n(58)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),s.Arguments=s.Array,i("keys"),i("values"),i("entries")},function(t,e,n){var i=n(4)("unscopables"),r=Array.prototype;null==r[i]&&n(10)(r,i,{}),t.exports=function(t){r[i][t]=!0}},function(t,e,n){t.exports=!n(12)&&!n(15)(function(){return 7!=Object.defineProperty(n(40)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(6),r=n(5).document,s=i(r)&&i(r.createElement);t.exports=function(t){return s?r.createElement(t):{}}},function(t,e,n){var i=n(42);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var i=n(14),r=n(61),s=n(31),a=n(30)("IE_PROTO"),o=function(){},c=function(){var t,e=n(40)("iframe"),i=s.length;for(e.style.display="none",n(64).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),c=t.F;i--;)delete c.prototype[s[i]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(o.prototype=i(t),n=new o,o.prototype=null,n[a]=t):n=c(),void 0===e?n:r(n,e)}},function(t,e,n){var i=n(8),r=n(13),s=n(45)(!1),a=n(30)("IE_PROTO");t.exports=function(t,e){var n,o=r(t),c=0,l=[];for(n in o)n!=a&&i(o,n)&&l.push(n);for(;e.length>c;)i(o,n=e[c++])&&(~s(l,n)||l.push(n));return l}},function(t,e,n){var i=n(13),r=n(62),s=n(63);t.exports=function(t){return function(e,n,a){var o,c=i(e),l=r(c.length),u=s(a,l);if(t&&n!=n){for(;l>u;)if((o=c[u++])!=o)return!0}else for(;l>u;u++)if((t||u in c)&&c[u]===n)return t||u||0;return!t&&-1}}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e,n){var i=n(8),r=n(48),s=n(30)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var i=n(29);t.exports=function(t){return Object(i(t))}},function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return c});n(0),n(1),n(2),n(9),n(35),n(36);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=function(e){function n(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),s(this,a(n).call(this,{key:"SplashScreen",pack:{files:[{key:"splash-screen",type:"image"},{key:"progress-bar",type:"image"},{key:"progress-bg",type:"image"}]}}))}var i,c,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(n,Phaser.Scene),i=n,(c=[{key:"preload",value:function(){this.showCover(),this.setupRotationHandling(),this.setupiOS8BrowserCompatability(),this.charData=[];this.load.json("data","test_gameData.json"),this.load.bitmapFont("HelloHeadline","fonts/helloheadline.png","fonts/helloheadline.xml")}},{key:"setupRotationHandling",value:function(){this.createRotateMessage(),this.startedInPortrait=this.scene.scene.scale.orientation===Phaser.Scale.PORTRAIT,this.startedInPortrait||this.hideOrientationMessage(),this.scene.scene.scale.refresh();var t=this;this.scene.scene.scale.on("orientationchange",function(e){e===Phaser.Scale.PORTRAIT?t.showOrientationMessage():e===Phaser.Scale.LANDSCAPE&&t.hideOrientationMessage()})}},{key:"setupiOS8BrowserCompatability",value:function(){if(this.scene.systems.game.device.os.iOS)if(8===this.scene.systems.game.device.os.iOSVersion){var t=this;this.scene.scene.scale.on("resize",function(e,n,i,r){t.gameResized()}),this.makeFullScreenMessage(),this.makeFullScreenMessageBG(),this.gameResized()}else this.scene.scene.scale.refresh()}},{key:"create",value:function(){this.showProgressBar(),this.scene.scene.scale.refresh(),this.spineData=this.cache.json.get("data").spineData,this.charData=this.cache.json.get("data").characters,this.dressupData=this.cache.json.get("data").dressupConfig,this.titleConfig=this.cache.json.get("data").titleConfig,this.sounds=this.cache.json.get("data").soundConfig,this.characterSFX=this.cache.json.get("data").characterSFX,this.load.image("startBtn","play_btn_lrg.png"),this.load.image("playBtn","play_btn_small.png"),this.load.image("tickBtn","tick_btn_small.png"),this.load.image("blank","blank.png"),this.load.image("white","white.png"),this.load.image("pauseBtn","pause_btn.png"),this.load.image("pause_popup"),this.load.image("help_popup"),this.load.image("sound_on","sound_btn_on.png"),this.load.image("sound_off","sound_btn_off.png"),this.load.image("helpBtn","help_btn.png"),this.load.image("hand","help_hand_white.png"),this.load.image("btnUp","scroll_btn_up.png"),this.load.image("btnDown","scroll_btn_down.png"),this.load.image("gameBG","playroom_notoys.png"),this.load.image("dressupBG","playroom_detail.png"),this.load.image("bandit","bandit_static.png"),this.load.image("bingo","bingo_static.png"),this.load.image("xylo","magic_xylophone.png"),this.load.image("dinger","dinger.png"),this.load.image("carousel"),this.load.image("zoom_bluey_bg"),this.load.image("zoom_bingo_bg"),this.load.image("zoom_dad_bg"),this.helpConfig=this.cache.json.get("data").helpConfig;for(var t=0;t<this.helpConfig.steps.length;t++)this.load.image(this.helpConfig.steps[t].image);for(var e=this.sounds.length,n=0;n<e;n++){var i=this.sounds[n];if(void 0!==i.variants)for(var r=0;r<i.variants;r++){var s="sound/"+i.file+(r+1)+".ogg",a="sound/"+i.file+ +(r+1)+".mp3";this.load.audio(i.name+(r+1),[s,a])}else{var o="sound/"+i.file+".ogg",c="sound/"+i.file+".mp3";this.load.audio(i.name,[o,c])}}for(var l=this.characterSFX.length,u=0;u<l;u++){var h=this.characterSFX[u];void 0!==h.sounds&&(void 0!==h.sounds&&this.loadAudioFromArray(h.sounds),void 0!==h.vo&&this.loadAudioFromArray(h.vo),void 0!==h.include&&this.loadAudioFromArray(h.include))}this.load.atlas("items","spritesheets/magicxylo_items.png","spritesheets/magicxylo_items.json"),this.load.atlas("freeplaceItems","spritesheets/magicxylo_items_place.png","spritesheets/magicxylo_items_place.json"),this.load.setPath("assets/title");for(var f=this.titleConfig.images.length,p=0;p<f;p++)this.load.image(this.titleConfig.images[p].name);this.load.setPath("assets/spine");for(var d=this.spineData.length,y=0;y<d;y++){var g=this.spineData[y].key,m=this.spineData[y].atlas,v=this.spineData[y].data,b=this.scene.systems.game.device.os.pixelRatio;window.spriteScaler=1,b<=1&&!this.scene.systems.game.device.os.desktop&&(window.spriteScaler=3,m=this.spineData[y].atlas_1x,g=this.spineData[y].key_1x,v=this.spineData[y].data_1x),this.load.spine(g,v,m)}this.load.on("complete",this.loadComplete,this),this.load.start()}},{key:"loadAudioFromArray",value:function(t){for(var e=0;e<t.length;e++){var n="sound/"+t[e]+".ogg",i="sound/"+t[e]+".mp3";this.load.audio(t[e],[n,i])}}},{key:"loadComplete",value:function(){console.log("LOAD COMPLETE"),this.scene.start("Title")}},{key:"showCover",value:function(){this.add.image(0,0,"splash-screen").setOrigin(0),this.add.image(568,320,"progress-bg").setOrigin(.5)}},{key:"showProgressBar",value:function(){var t=this.textures.get("progress-bar").get(),e=t.width,n=t.height,i=this.add.sprite(568-e/2,320,"progress-bar").setOrigin(0,.5);this.load.on("progress",function(t){return i.setCrop(0,0,Math.ceil(t*e),n)})}},{key:"createRotateMessage",value:function(){this.scene.systems.game.device.os.desktop||(this._errorMsgDiv=$("<div id='rotateMessage' />"),$("body").append(this._errorMsgDiv),this.scene.systems.game.device.os.iPad?this._errorMsgDiv.css({"background-image":"url('orientation/orientation_ipad.jpg')"}):this._errorMsgDiv.css({"background-image":"url('orientation/orientation.jpg')"}))}},{key:"showOrientationMessage",value:function(){8===this.scene.systems.game.device.os.iOSVersion&&this.hideNonFullScreenMessage(),$("#rotateMessage").addClass("showMessage"),$("#rotateMessage").removeClass("hideMessage");for(var t=0;t<this.game.scene.scenes.length;++t)this.scene.sleep(this.game.scene.scenes[t].scene.key)}},{key:"hideOrientationMessage",value:function(){$("#rotateMessage").addClass("hideMessage"),$("#rotateMessage").removeClass("showMessage"),this.previousMuteState&&(this.previousMuteState=!1);for(var t=0;t<this.game.scene.scenes.length;++t)this.scene.wake(this.game.scene.scenes[t].scene.key);document.body.scrollTop=0,document.documentElement.scrollTop=0}},{key:"gameResized",value:function(){this.scene.systems.game.device.os.desktop||this.scene.systems.game.device.os.iOS&&this.scene.systems.game.device.os.iPhone&&this.scene.systems.game.device.os.iOSVersion<=8&&this.scene.scene.scale.orientation===Phaser.Scale.LANDSCAPE&&this.lastHeight!=window.innerHeight&&(this.lastHeight=window.innerHeight,this.isMinimalView()||this.scene.scene.scale.refresh())}},{key:"isMinimalView",value:function(){var t=this.deviceSpec();return void 0!==t&&window.innerHeight!==t[4]}},{key:"showNonFullScreenMessage",value:function(){t.scrollTo(0,0),$("#leftFullscreenMessage").removeClass("hideMessage"),$("#fullscreenOverlay").removeClass("hideMessage"),$("#leftFullscreenMessage").addClass("showMessage"),$("#fullscreenOverlay").addClass("showMessage"),this.nonFullScreenMessage.css({width:t.innerWidth+"px",height:2*t.innerHeight+"px"}),this.nonFullScreenMessageBG.css({width:t.innerWidth+"px",height:t.innerHeight+"px"});for(var e=0;e<this.game.scene.scenes.length;++e)this.scene.sleep(this.game.scene.scenes[e].scene.key)}},{key:"hideNonFullScreenMessage",value:function(){$("#leftFullscreenMessage").removeClass("showMessage"),$("#fullscreenOverlay").removeClass("showMessage"),$("#leftFullscreenMessage").addClass("hideMessage"),$("#fullscreenOverlay").addClass("hideMessage");for(var t=0;t<this.game.scene.scenes.length;++t)this.scene.wake(this.game.scene.scenes[t].scene.key)}},{key:"makeFullScreenMessage",value:function(){}},{key:"makeFullScreenMessageBG",value:function(){var t=$("<div id='fullscreenOverlay' />");$("body").append(t),this.nonFullScreenMessageBG=t}},{key:"deviceSpec",value:function(){var t,e,n=[[1280,1762,1920,1280,320,480,2,"iPhone 4"],[1280,2114,2272,1280,320,568,2,"iPhone 5 or 5s"],[1500,2510,2668,1500,375,667,2,"iPhone 6"],[1656,2785,2944,1656,414,736,3,"iPhone 6 plus"],[1500,2509,2668,1500,375,667,3,"iPhone 6 plus (Zoomed)"],[3072,3936,4096,2912,768,1024,1,"iPad 2"],[3072,3938,4096,2914,768,1024,2,"iPad Air or Retina"],[4096,5306,5464,3938,1024,1366,2,"iPad Pro"]];for(t=n.length;t--;)if(window.screen.width===n[t][4]&&window.screen.height===n[t][5]&&window.devicePixelRatio===n[t][6]){e=n[t];break}return e}}])&&r(i.prototype,c),l&&r(i,l),n}()}).call(this,n(69))},function(t,e,n){var i=n(5),r=n(21),s=n(22),a=n(51),o=n(11).f;t.exports=function(t){var e=r.Symbol||(r.Symbol=s?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||o(e,t,{value:a.f(t)})}},function(t,e,n){e.f=n(4)},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var i=n(44),r=n(31).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},function(t,e,n){t.exports=n(81)},function(t,e,n){for(var i=n(37),r=n(18),s=n(17),a=n(5),o=n(10),c=n(28),l=n(4),u=l("iterator"),h=l("toStringTag"),f=c.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=r(p),y=0;y<d.length;y++){var g,m=d[y],v=p[m],b=a[m],w=b&&b.prototype;if(w&&(w[u]||o(w,u,f),w[h]||o(w,h,m),c[m]=f,v))for(g in i)w[g]||s(w,g,i[g],!0)}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var i=n(24);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e,n){"use strict";var i=n(22),r=n(7),s=n(17),a=n(10),o=n(28),c=n(60),l=n(32),u=n(47),h=n(4)("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,d,y,g,m){c(n,e,d);var v,b,w,S=function(t){if(!f&&t in x)return x[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},O=e+" Iterator",k="values"==y,P=!1,x=t.prototype,C=x[h]||x["@@iterator"]||y&&x[y],_=C||S(y),D=y?k?S("entries"):_:void 0,I="Array"==e&&x.entries||C;if(I&&(w=u(I.call(new t)))!==Object.prototype&&w.next&&(l(w,O,!0),i||"function"==typeof w[h]||a(w,h,p)),k&&C&&"values"!==C.name&&(P=!0,_=function(){return C.call(this)}),i&&!m||!f&&!P&&x[h]||a(x,h,_),o[e]=_,o[O]=p,y)if(v={values:k?_:S("values"),keys:g?_:S("keys"),entries:D},m)for(b in v)b in x||s(x,b,v[b]);else r(r.P+r.F*(f||P),e,v);return v}},function(t,e,n){t.exports=n(20)("native-function-to-string",Function.toString)},function(t,e,n){"use strict";var i=n(43),r=n(23),s=n(32),a={};n(10)(a,n(4)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(a,{next:r(1,n)}),s(t,e+" Iterator")}},function(t,e,n){var i=n(11),r=n(14),s=n(18);t.exports=n(12)?Object.defineProperties:function(t,e){r(t);for(var n,a=s(e),o=a.length,c=0;o>c;)i.f(t,n=a[c++],e[n]);return t}},function(t,e,n){var i=n(46),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e,n){var i=n(46),r=Math.max,s=Math.min;t.exports=function(t,e){return(t=i(t))<0?r(t+e,0):s(t,e)}},function(t,e,n){var i=n(5).document;t.exports=i&&i.documentElement},function(t,e,n){"use strict";var i=n(66),r={};r[n(4)("toStringTag")]="z",r+""!="[object z]"&&n(17)(Object.prototype,"toString",function(){return"[object "+i(this)+"]"},!0)},function(t,e,n){var i=n(24),r=n(4)("toStringTag"),s="Arguments"==i(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),r))?n:s?i(e):"Object"==(a=i(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,n){var i=n(7),r=n(68)(!1);i(i.S,"Object",{values:function(t){return r(t)}})},function(t,e,n){var i=n(18),r=n(13),s=n(25).f;t.exports=function(t){return function(e){for(var n,a=r(e),o=i(a),c=o.length,l=0,u=[];c>l;)s.call(a,n=o[l++])&&u.push(t?[n,a[n]]:a[n]);return u}}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var i=n(16)("meta"),r=n(6),s=n(8),a=n(11).f,o=0,c=Object.isExtensible||function(){return!0},l=!n(15)(function(){return c(Object.preventExtensions({}))}),u=function(t){a(t,i,{value:{i:"O"+ ++o,w:{}}})},h=t.exports={KEY:i,NEED:!1,fastKey:function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!s(t,i)){if(!c(t))return"F";if(!e)return"E";u(t)}return t[i].i},getWeak:function(t,e){if(!s(t,i)){if(!c(t))return!0;if(!e)return!1;u(t)}return t[i].w},onFreeze:function(t){return l&&h.NEED&&c(t)&&!s(t,i)&&u(t),t}}},function(t,e,n){var i=n(18),r=n(52),s=n(25);t.exports=function(t){var e=i(t),n=r.f;if(n)for(var a,o=n(t),c=s.f,l=0;o.length>l;)c.call(t,a=o[l++])&&e.push(a);return e}},function(t,e,n){var i=n(24);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){var i=n(13),r=n(53).f,s={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==s.call(t)?function(t){try{return r(t)}catch(t){return a.slice()}}(t):r(i(t))}},function(t,e,n){var i=n(6),r=n(14),s=function(t,e){if(r(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{(i=n(41)(Function.call,n(33).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return s(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:s}},function(t,e,n){"use strict";var i=n(7),r=n(45)(!0);i(i.P,"Array",{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(38)("includes")},function(t,e,n){"use strict";var i=n(7),r=n(77);i(i.P+i.F*n(79)("includes"),"String",{includes:function(t){return!!~r(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var i=n(78),r=n(29);t.exports=function(t,e,n){if(i(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(t))}},function(t,e,n){var i=n(6),r=n(24),s=n(4)("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==r(t))}},function(t,e,n){var i=n(4)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[i]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,n){"use strict";var i=n(15);t.exports=function(t,e){return!!t&&i(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e,n){"use strict";n.r(e);var i={};n.r(i),n.d(i,"SplashScreen",function(){return s.a}),n.d(i,"CharacterSelect",function(){return U}),n.d(i,"Dressup",function(){return kt}),n.d(i,"Title",function(){return jt});var r={};n.r(r),n.d(r,"width",function(){return At}),n.d(r,"height",function(){return Bt}),n.d(r,"scale",function(){return Et}),n.d(r,"zoom",function(){return Mt}),n.d(r,"resolution",function(){return Rt}),n.d(r,"type",function(){return Ht}),n.d(r,"pixelArt",function(){return Xt}),n.d(r,"roundPixels",function(){return Ft}),n.d(r,"transparent",function(){return zt}),n.d(r,"parent",function(){return Yt}),n.d(r,"canvasStyle",function(){return Gt}),n.d(r,"backgroundColor",function(){return Lt}),n.d(r,"clearBeforeRender",function(){return Wt}),n.d(r,"fps",function(){return Nt}),n.d(r,"physics",function(){return Vt}),n.d(r,"loader",function(){return $t}),n.d(r,"plugins",function(){return Qt}),n.d(r,"title",function(){return Tt.a}),n.d(r,"version",function(){return Tt.c}),n.d(r,"url",function(){return Tt.b}),n.d(r,"scene",function(){return Ut});n(55),n(37),n(65),n(67);var s=n(49);n(0),n(1),n(3),n(2),n(75),n(76),n(9),n(34);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=function(t){function e(t,n,i,r,s,o){var l,h,f;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),h=this,(l=!(f=u(e).call(this,t,0,0,"blank"))||"object"!==a(f)&&"function"!=typeof f?c(h):f).spineRef=i,l.name=r,l.animations=s,l.idleAnims=s.idles,l.charActive=!0,l.shuffle(l.idleAnims),l.sfx=o,l.emitter=new Phaser.Events.EventEmitter,t.add.existing(c(l)),l.ID=n,l.minIdleTime=1e3,l.maxIdleTime=3e3,l.idleCounter=l.randomRange(0,l.maxIdleTime),l.idleTime=Phaser.Math.Between(l.minIdleTime,l.maxIdleTime),l.prevTimescale=1,l.spineChar=t.add.spine(0,0,i,l.lastPlayedAnim,!0),l.clickArea=t.add.image(0,0,"blank"),l.clickArea.setOrigin(.5,1),l.setSkin(r),l.lastPlayedAnim=s.default,l.transform=t.add.container(0,0);var p=t.add.container(0,0,[l.spineChar,l.clickArea]);return l.transform.add(p),l.frozen=!1,l.canIdle=!0,l.idleActive=!0,l.charActive=!0,l}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(e,Phaser.GameObjects.Image),n=e,(i=[{key:"kill",value:function(){this.clickArea.off("pointerdown")}},{key:"wrap",value:function(t){return t%360}},{key:"setTransform",value:function(t,e,n,i,r){var s=t,a=e;this.transform.setPosition(s,a),this.direction=r,this.spineChar.setScale(n*this.direction,i),this.texBounds=this.spineChar.getBounds(),this.charWidth=this.texBounds.size.x*this.spineChar.scaleX,this.charHeight=this.texBounds.size.y*this.spineChar.scaleY,this.clickArea.setDisplaySize(this.charWidth,this.charHeight)}},{key:"updateCharacter",value:function(t,e,n){1==this.idleActive&&0==this.frozen&&this.updateIdle(n,e)}},{key:"shuffle",value:function(t){t.sort(function(){return Math.random-.5})}},{key:"updateIdle",value:function(t,e){this.idleCounter>=this.idleTime?(this.resetIdle(),this.setTimescale(.9,1.1),this.playAnimVariant(t,this.idleAnims,"IDLE")):this.idleCounter+=e}},{key:"setSortOrder",value:function(t){this.spineChar.depth=t}},{key:"randomRange",value:function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?Phaser.Math.Between(t,e):Phaser.Math.Between(100*t,100*e)/100}},{key:"setSkin",value:function(t){this.spineChar.setSkin(null),this.spineChar.setSkinByName(t),this.attachments=this.spineChar.skeleton.skin.attachments}},{key:"setTimescale",value:function(t,e){var n=100*t,i=100*e,r=Phaser.Math.Between(n,i)/100;this.spineChar.state.timeScale=r}},{key:"playAnim",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(n>0&&(this.spineChar.setMix(this.currentAnim,e,n),this.spineChar.setAnimation(0,e,i,0),0==i)){var s=this.spineChar.state.getCurrent(0);if(void 0!==s){var a=s.getAnimationLength();this.spineChar.setMix(e,this.animations.default,n),this.spineChar.addAnimation(0,this.animations.default,!0,a-n)}}this.playing=!0,this.returnToPrevious=r,this.currentAnimation=e}},{key:"playAnimVariant",value:function(t,e){var n=Phaser.Math.Between(0,e.length-1),i=e[n];Array.isArray(e)?(this.playAnim(t,i,.25,!1,!0),void 0!==e[n].sfx&&this.playAnimSFX(t,e[n].sfx)):this.playAnim(t,i,.25,!1,!0)}},{key:"playAnimSFX",value:function(t,e){var n=Phaser.Math.Between(0,e.length-1);t.sound.play(e[n],{volume:.5})}},{key:"playHappy",value:function(t){this.resetIdle(),this.setTimescale(.9,1.1),this.playAnimVariant(t,this.animations.happy,"HAPPY")}},{key:"playCelebrate",value:function(t){this.resetIdle(),this.playAnimVariant(t,this.animations.celebrate,"CELEBRATE")}},{key:"playSad",value:function(t){this.resetIdle(),this.playAnimVariant(t,this.animations.sad,"SAD")}},{key:"togglePause",value:function(t){this.idleActive=!t&&this.canIdle,this.spineChar.state.timeScale=t?0:1}},{key:"handleCharacterClicked",value:function(){this.charActive&&this.emitter.emit("characterClicked",this.characterID)}},{key:"resetIdle",value:function(){this.idleCounter=0,this.idleTime=Phaser.Math.Between(this.minIdleTime,this.maxIdleTime)}},{key:"toggleActive",value:function(t){this.charActive=!t,this.charActive?this.spineChar.state.timescale=void 0!==this.prevTimescale?this.prevTimescale:1:(this.prevTimescale=this.spineChar.state.timescale,this.spineChar.state.timescale=0)}},{key:"destroy",value:function(){this.transform.removeAll(),this.transform=null,this.spineChar.destroy(),this.spineChar=null,this.emitter=null,this.animations=null,l(u(e.prototype),"destroy",this).call(this)}}])&&o(n.prototype,i),r&&o(n,r),e}();function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t,e,n){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=m(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){return(v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var b=function(t){function e(t,n,i,r,s,a,o){var c,l,u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),l=this,(c=!(u=m(e).call(this,t,n,i,r,s,a))||"object"!==p(u)&&"function"!=typeof u?y(l):u).slotDefs=o,c.dressupData=t.cache.json.get("data").dressupConfig,c.currentAnim=c.animations.default,c.activeSlots=[],c.scaleMultiplier=.3,t.add.existing(y(c)),c.dancing=!1,c.danceTime=2300,c.danceCounter=0,c.giggling=!1,c.giggleTime=0,c.giggleCounter=0,c.giggleIdx=0,c.frozen=!1,c.clothes=t.add.container(0,0),c.clothes.setPosition(0,0),c.clickArea.setInteractive({useHandCursor:!0}).on("pointerdown",function(t){this.handleCharacterClicked(this.ID,t)},y(c)),c.initActiveSlots(),c}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&v(t,e)}(e,f),n=e,(i=[{key:"initActiveSlots",value:function(){for(var t=0;t<this.slotDefs.length;t++)if(Array.isArray(this.slotDefs[t]))for(var e=0;e<this.slotDefs[t].length;e++){var n=this.spineChar.skeleton.findSlot(this.slotDefs[t][e]);null!=n&&(this.setAttachment(this.slotDefs[t][e],null),this.activeSlots.push(n))}else{var i=this.spineChar.skeleton.findSlot(this.slotDefs[t]);null!=i&&(this.setAttachment(this.slotDefs[t],null),this.activeSlots.push(i))}}},{key:"kill",value:function(){this.clickArea.off("pointerdown")}},{key:"freeze",value:function(t,e,n){this.spineChar.addAnimation(0,e,!1);var i=this.spineChar.state.getCurrent(0);void 0!==i&&(i.trackTime=n,this.spineChar.state.apply(this.spineChar.skeleton),this.spineChar.state.timeScale=0)}},{key:"setTransform",value:function(t,n,i,r,s){g(m(e.prototype),"setTransform",this).call(this,t,n,i,r,s),this.charScale=i,this.charScaleX=Math.abs(i),this.charScaleY=Math.abs(r)}},{key:"randomPointInBounds",value:function(){var t=Math.abs(this.clickArea.displayWidth/2),e=this.clickArea.displayHeight;return{x:this.transform.x+Phaser.Math.Between(80-t,t-80),y:this.transform.y-Phaser.Math.Between(80,e-80)}}},{key:"populateSlots",value:function(t,e,n,i){this.activeSlots=e,this.itemScale=i;for(var r=0;r<e.length;r++){var s=e[r];s.freePlace=!1,s.name=e[r].item;var a=s.overrideSlot;this.setAttachment(s.slot,s.attachment),void 0===a?this.addAttachmentAsSprite(t,s):!1===a.noSprite&&this.addAttachmentAsSprite(t,s,a.spriteName)}for(var o=i,c=0;c<n.length;c++){var l=n[c],u=l.x*this.charWidth,h=l.y*this.charHeight,f=t.add.image(this.transform.x+u,this.transform.y+h,"freeplaceItems",l.sprite+".png");f.freePlace=!0;var p=f.width*o,d=f.height*o;f.setDisplaySize(p,d),this.clothes.add(f)}}},{key:"handleCharacterClicked",value:function(t,e){this.charActive&&this.emitter.emit("characterClicked",t,e)}},{key:"getNormalizedPosition",value:function(t,e){return{x:(t-this.transform.x)/this.charWidth,y:(e-this.transform.y)/this.charHeight}}},{key:"addItem",value:function(t,e){this.clothes.add(e)}},{key:"getClosestSlot",value:function(t,e){for(var n=100,i=null,r=0;r<this.slotDefs.length;r++){var s=this.activeSlots[r].bone,a=this.transform.x+s.worldX*this.spineChar.scaleX,o=this.transform.y-s.worldY*this.spineChar.scaleY,c=this.distance(t,e,a,o);null!==this.activeSlots[r].attachment&&c<n&&(n=c,i=this.slotDefs[r])}return i}},{key:"getSlotFromPosition",value:function(t,e){return this.getClosestSlot(t,e)}},{key:"distance",value:function(t,e,n,i){var r=t-n,s=e-i;return Math.sqrt(r*r+s*s)}},{key:"toggleEyes",value:function(t){t?(this.setAttachment("Openeye_L","Openeye_L"),this.setAttachment("Openeye_R","Openeye_R")):(this.setAttachment("Openeye_L","Openeye_L_empty"),this.setAttachment("Openeye_R","Openeye_R_empty"))}},{key:"addAttachmentAsSprite",value:function(t,e,n){var i=this.spineChar.skeleton.findSlot(e.slot).bone,r=this.transform.x+i.worldX*this.spineChar.scaleX,s=this.transform.y-i.worldY*this.spineChar.scaleY,a=null;if(void 0!==n){var o=n+".png";a=t.add.sprite(0,0,"freeplaceItems",o)}else null==(a=this.spineChar.skeleton.atlas.getImageFromRegion(t,e.attachment))&&(a=this.spineChar.skeleton.atlas.getImageFromRegion(t,e.item));if(null!=a){var c=this.charScale/this.scaleMultiplier;a.scaleX=c*window.spriteScaler,a.scaleY=c*window.spriteScaler;var l=t.add.container(0,0,[a]),u=t.add.container(0,0,[l]);u.itemName=e.item,u.freePlace=!1,this.clothes.add(u),u.x=r,u.y=s,l.x=0,l.y=0;var h=i.getWorldRotationX();l.angle=h,u.alpha=0}}},{key:"wrap",value:function(t){return t%360}},{key:"animateClothes",value:function(t,e){for(var n=this,i=0;i<this.activeSlots.length;i++)for(var r=0;r<this.dressupData.items.length;++r)this.dressupData.items[r].icon===this.activeSlots[i].item&&(e&&"true"!=this.dressupData.items[r].freePlace||this.setAttachment(this.activeSlots[i].slot,null));this.clothes.depth=5;for(var s=function(){var i=n.clothes.getAt(a);if(null!=i){var r=!0;if(!i.freePlace)for(o=0;o<n.dressupData.items.length;++o)if(n.dressupData.items[o].icon===i.itemName){var s="true"==n.dressupData.items[o].freePlace;void 0===s&&(s=!1),r=s}if(i.freePlace&&e||!e||r){i.depth=0;var c=i.x-n.transform.x>0?1:-1,l=i.x+c*Phaser.Math.Between(100,300),u=i.y-Phaser.Math.Between(50,75),h=n.transform.y,f=Phaser.Math.Between(-360,360);i.alpha=1,t.characterGroup.add(i),t.tweens.add({targets:i,x:l,duration:2e3}),t.tweens.add({targets:i,y:u,duration:1e3,ease:"Cubic.easeOut"}),t.tweens.add({targets:i,y:h,duration:1e3,delay:1e3,ease:"Bounce.easeOut",easeParams:[.01*Phaser.Math.Between(100,200)]}),t.tweens.add({targets:i,angle:f,duration:1750,ease:"Quad.easeOut"}),t.tweens.add({targets:i,alpha:0,duration:500,delay:1750,onComplete:function(){i.destroy()}})}}},a=0;a<this.clothes.length;a++){var o;s()}this.spineChar.state.timeScale=1,e||this.playAnim(t,this.animations.shake,.1,!1,!1)}},{key:"startMove",value:function(t){this.playAnim(t,this.animations.default,.33,!0),this.playing=!0}},{key:"startDance",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.dancing=!0,this.idleActive=!1,this.canIdle=!1,this.toggleEyes(!1),this.danceIdx=0,e?this.playDance(t):this.danceTime=500}},{key:"startGiggle",value:function(t){var e=this;this.dancing=!1,this.idleActive=!1,this.giggling=!0,this.canIdle=!1,this.giggleTime=2e3,this.giggleCounter=0,this.giggleIdx=0,t.time.delayedCall(Phaser.Math.Between(0,500),function(){e.playHappy(t,!0)})}},{key:"danceThenAnimateClothes",value:function(t,e){var n=this;this.animateClothes(t,!0);var i=this.spineChar.state.getCurrent(0);this.idleAnims.includes(i.animation.name)?this.startDance(t):(this.dancing=!0,this.danceIdx=0,this.danceCounter=this.spineChar.state.getCurrent(0).getAnimationTime()/.001,this.danceTime=this.spineChar.state.getCurrent(0).getAnimationLength()/.001),t.time.delayedCall(4e3,function(){n.dancing=!1,n.animateClothes(t),n.toggleEyes(!1)}),t.time.delayedCall(6e3,function(){n.startDance(t),e()})}},{key:"updateCharacter",value:function(t,n,i){g(m(e.prototype),"updateCharacter",this).call(this,t,n,i),1!=this.dancing||this.giggling||(this.danceCounter>=this.danceTime?this.animations.dance.length>1&&(this.danceIdx=(this.danceIdx+1)%this.animations.dance.length,this.playDance(i)):this.danceCounter+=n),1==this.giggling&&(this.giggleCounter>=this.giggleTime?this.dancing?this.giggling=!1:this.animations.happy.length>1&&(this.giggleIdx=(this.giggleIdx+1)%this.animations.happy.length,this.playHappy(i,!0)):this.giggleCounter+=n)}},{key:"playHappy",value:function(t,e){this.lastDanceAnim=this.danceAnim,this.giggleAnim=this.animations.happy[this.giggleIdx],this.playAnim(t,this.giggleAnim,.05,!1,!1),this.sfx.hasOwnProperty(this.giggleAnim)&&t.sound.play(this.sfx[this.giggleAnim]),e?(this.giggleTime=2e3+Phaser.Math.Between(0,500),this.giggleCounter=0,this.giggling=!0):this.giggling=!1}},{key:"playDance",value:function(t){this.lastDanceAnim=this.danceAnim,this.danceAnim=this.animations.dance[this.danceIdx],this.playAnim(t,this.danceAnim,.05,!1,!1),g(m(e.prototype),"setTimescale",this).call(this,.95,1.05),this.lastDanceLength=this.danceLength,this.danceLength=this.spineChar.state.getCurrent(0).getAnimationLength()+.05,this.lastDanceAnim,this.danceTime=Phaser.Math.Between(0,500)+this.danceLength/.001,this.danceCounter=0}},{key:"randomRange",value:function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?Phaser.Math.Between(t,e):Phaser.Math.Between(100*t,100*e)/100}},{key:"setAttachment",value:function(t,e){this.spineChar.skeleton.setAttachment(t,e)}},{key:"toggleFreeze",value:function(){if(1==this.playing){var t=this.spineChar.state.getCurrent(0);void 0!==t&&(this.freezeTime=t.getAnimationTime()),this.spineChar.state.timeScale=0,this.dancing=!1,this.frozen=!0,this.playing=!1,this.toggleEyes(!0)}else this.spineChar.state.timeScale=1,this.frozen=!1,this.playing=!0,this.toggleEyes(!1)}},{key:"wiggle",value:function(t){var e=5*this.direction;this.transform.x-=e;var n=this.transform.x+e;this.wiggleTween=t.tweens.add({targets:this.transform,x:n,duration:300,ease:"Bounce.easeOut"})}},{key:"destroy",value:function(){if(null!=this.clothes)for(var t=this.clothes.length-1;t>=0;t--)null!=this.clothes[t]&&(this.clothes[t].destroy(),this.clothes[t]=null);this.clothes=null,this.moveTween=null,g(m(e.prototype),"destroy",this).call(this)}}])&&d(n.prototype,i),r&&d(n,r),e}();function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function O(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k(t,e,n){return(k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=P(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function P(t){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function x(t,e){return(x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var C=function(t){function e(t,n,i,r,s){var a,o,c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=this,c=P(e).call(this,t,n,i,r),(a=!c||"object"!==w(c)&&"function"!=typeof c?O(o):c).name=r,a.blocked=!1,a.btnSFX="click",t.add.existing(O(a)),a.setOrigin(.5),a.emitter=new Phaser.Events.EventEmitter,a.setInteractive({useHandCursor:!0}).on("pointerdown",function(){!1===a.blocked&&a.onPress(t,s)},O(a)),a}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x(t,e)}(e,Phaser.GameObjects.Image),n=e,(i=[{key:"onPress",value:function(t,e){void 0!==this.btnSfx&&t.sound.play(this.btnSFX),this.animate(t,e)}},{key:"animate",value:function(t,e){var n=this.scaleX,i=this.scaleY;null!=this.pressTween&&(this.pressTween.stop(),this.pressTween=null),this.pressTween=t.tweens.add({targets:this,scaleX:.9*n,scaleY:.9*i,duration:50,yoyo:!0,onComplete:function(){return e()}})}},{key:"destroy",value:function(){null!=this.pressTween&&(this.pressTween.stop(),this.pressTween=null),k(P(e.prototype),"destroy",this).call(this)}}])&&S(n.prototype,i),r&&S(n,r),e}();function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function D(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function I(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function j(t,e,n){return(j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=T(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function T(t){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function A(t,e){return(A=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var B=function(t){function e(t,n,i,r,s,a,o,c){var l,u,h;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),u=this,(l=!(h=T(e).call(this,t,n,i,"xylo",s))||"object"!==_(h)&&"function"!=typeof h?I(u):h).startOffset=100,l.endOffset=-150,l.btnSFX=void 0,l.dingY=i+l.startOffset,l.startDingY=r+l.startOffset,l.targetY=i-100,l.callbackOnTing=o,l.dinger=t.add.image(n+170,l.dingY,"dinger"),c.add(I(l)),l.depth=10,c.add(l.dinger),l.dinger.depth=11,l.dinger.setOrigin(.5,1),l.active=a,l.animating=!1,l.blocked=!1,l.holderGroup=c,l}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&A(t,e)}(e,C),n=e,(i=[{key:"onPress",value:function(t,n){!0===this.active&&!1===this.blocked&&(1==this.callbackOnTing?0==this.animating&&j(T(e.prototype),"onPress",this).call(this,t,n):n())}},{key:"animateIn",value:function(t,e){var n=this;this.animating=!0;t.tweens.add({targets:[this,this.dinger],y:"-=100",ease:"Quad.easeInOut",duration:100});this.dingY=this.startDingY-100,this.pressTween=t.tweens.add({targets:this.dinger,props:{angle:{value:-90,duration:150,delay:100,ease:"Back.easeIn"},y:{value:this.dingY+this.endOffset,duration:150,ease:"Quad.easeOut",delay:100}},onComplete:function(){t.sound.play("ting"),void 0!==e&&e(),n.pressTween=t.tweens.add({targets:n.dinger,props:{angle:{value:0,duration:150,ease:"Quad.easeInOut"},y:{value:n.dingY,duration:150,ease:"Quad.easeInOut"}},onComplete:function(){n.animating=!1}})}})}},{key:"animateOut",value:function(t,e){var n=this;this.animating=!0;t.tweens.add({targets:[this,this.dinger],y:"+=100",ease:"Quad.easeInOut",duration:100,delay:1e3});this.pressTween=t.tweens.add({targets:this.dinger,props:{angle:{value:-90,duration:150,delay:150,ease:"Back.easeIn"},y:{value:this.dingY+this.endOffset,duration:150,ease:"Quad.easeOut"}},onComplete:function(){t.sound.play("ting"),void 0!==e&&e(),n.pressTween=t.tweens.add({targets:n.dinger,props:{angle:{value:0,duration:150,ease:"Quad.easeInOut"},y:{value:n.dingY,duration:150,ease:"Quad.easeInOut"}},onComplete:function(){n.animating=!1}})}})}}])&&D(n.prototype,i),r&&D(n,r),e}(),E=n(35),M=n(36);function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function H(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function X(t,e){return!e||"object"!==R(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function F(t){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function z(t,e){return(z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Y=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),X(this,F(e).apply(this,arguments))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&z(t,e)}(e,Phaser.Scene),n=e,(i=[{key:"create",value:function(){var t=this;this.created=!0;var e=localStorage.getItem("mute");this.mute=void 0!==e&&"true"===e,this.toggleMute(this.mute),this.paused=!1,this.helpConfig=this.cache.json.get("data").helpConfig,this.characterGroup=this.add.group(),this.screenWidth=this.cameras.main.width,this.screenHeight=this.cameras.main.height;var n=this.screenWidth,i=this.screenHeight;this.backgroundGroup=this.add.group(),this.uiGroup=this.add.group(),this.popupGroup=this.add.group(),this.bg=this.add.image(n/2,i/2,"blank"),this.bg.setOrigin(.5,.5),this.bg.setDisplaySize(n,i),this.bg.setDepth(-5),this.characters=[],this.helpPopup=new M.a(this,this.popupGroup,this.helpConfig),this.pausePopup=new E.a(this,this.popupGroup),this.pausePopup.emitter.on("gameResumed",this.handleResumed,this),this.helpPopup.emitter.on("gameResumed",this.handleResumed,this),this.pausePopup.emitter.on("helpRequested",this.showHelp,this),this.pauseBtn=this.add.image(n-10,10,"pauseBtn"),this.pauseBtn.setOrigin(1,0),this.pauseBtn.setInteractive({useHandCursor:!0}).on("pointerdown",function(){!1===t.paused&&(t.handlePaused(),0==t.pausePopup.active&&t.pausePopup.show(t))},this),this.uiGroup.depth=20,this.uiGroup.add(this.pauseBtn),this.popupGroup.depth=30,this.toggleMute(this.mute),this.idleTime=0,this.canIdle=!0}},{key:"init",value:function(){}},{key:"toggleMute",value:function(t){this.mute=t,localStorage.setItem("mute",this.mute),this.sound.setMute(this.mute)}},{key:"handlePaused",value:function(){this.paused=!0,void 0!==this.xyloButton&&(this.xyloButton.blocked=!0),void 0!==this.endEvent&&null!==this.endEvent&&(this.endEvent.paused=!0),void 0!==this.bgEvent&&null!==this.bgEvent&&(this.bgEvent.paused=!0);for(var t=0;t<this.characters.length;t++)this.characters[t].togglePause(!0)}},{key:"handleResumed",value:function(){this.paused=!1,void 0!==this.xyloButton&&(this.xyloButton.blocked=!1),void 0!==this.endEvent&&(this.endEvent.paused=!1),void 0!==this.bgEvent&&(this.bgEvent.paused=!1);for(var t=0;t<this.characters.length;t++)this.characters[t].togglePause(!1)}},{key:"showHelp",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.handlePaused(),this.helpPopup.show(this,t)}},{key:"wrap",value:function(t,e,n){return t>=e&&t<=n?t:t<e?n-(t-e):e+(t-n)}},{key:"update",value:function(t,e){if(!1===this.paused&&null!==this.characters){for(var n=0;n<this.characters.length;n++)this.characters[n].updateCharacter(t,e,this);this.canIdle&&(this.idleTime+=e,this.idleTime>6e3&&(this.idleTime=0,this.playIdle()))}}},{key:"playIdle",value:function(){}},{key:"cleanup",value:function(){for(var t=this.characters.length-1;t>=0;t--)this.characters[t].destroy(),this.characters[t]=null;this.characters=null,this.characterGroup.clear(!0),this.characterGroup.destroy(),this.backgroundGroup.clear(!0),this.backgroundGroup.destroy(),this.uiGroup.clear(!0),this.uiGroup.destroy(),this.popupGroup.clear(!0),this.popupGroup.destroy()}}])&&H(n.prototype,i),r&&H(n,r),e}(),G=n(19);function L(t){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function N(t,e){return!e||"object"!==L(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function V(t,e,n){return(V="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function $(t){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Q(t,e){return(Q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var U=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),N(this,$(e).call(this,{key:"CharacterSelect"}))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Q(t,e)}(e,Y),n=e,(i=[{key:"init",value:function(t){V($(e.prototype),"init",this).call(this,t),this.characterID=t.characterID,this.activeSlots=t.activeSlots,this.placedItems=t.placedItems,this.freezeAnim=t.freezeAnim,this.freezeTime=t.freezeTime}},{key:"create",value:function(){var t=this;V($(e.prototype),"create",this).call(this);var n=this.screenWidth,i=this.screenHeight;this.bg.setTexture("gameBG"),this.bg.setOrigin(.5,.5),this.bg.setDisplaySize(n,i),this.bg.setDepth(-20),this.pressedXylophone=!1,this.xyloButton=new B(this,n/2,this.charSelected?i-10:i+80,i+80,function(){t.simulateXlyophonePressed()},void 0===this.characterID,!0,this.uiGroup),this.charSelected&&(this.bgEvent=this.time.delayedCall(3e3,function(){return t.simulateXlyophonePressed()})),this.count=0,this.charIndex=0,this.characters=[],this.charSelected=!1;this.charData=this.cache.json.get("data").characters,this.dressupData=this.cache.json.get("data").dressupConfig;for(var r=0;r<this.charData.length;r++){var s=this.charData[r];"static"!==s.type&&function(){var e=new b(t,r,s.spine,s.skin,s.animations,s.sfx,s.slots);if(e.setTransform(s.posX,s.posY,s.scale,s.scale,s.direction),e.setSortOrder(-15),e.canIdle=!1,e.idleActive=!1,t.characterGroup.add(e),t.characters.push(e),void 0!==t.characterID)if(r==t.characterID){var n=t.dressupData.itemScale/t.dressupData.scaleX;console.log("dance item scale --\x3e "+n),e.populateSlots(t,t.activeSlots,t.placedItems,n),e.freeze(t,t.freezeAnim,t.freezeTime),e.toggleEyes(!0)}else e.canIdle=!0,e.idleActive=!0,e.toggleEyes(!1),e.resetIdle(),t.time.delayedCall(750,function(){return t.playCelebrate(e)});else t.setInteractive(e,!0),t.xyloButton.blocked=!0,t.showHelp(!1)}(),this.characterGroup.depth=5,this.uiGroup.depth=15,this.popupGroup.depth=25}this.characterSFX=this.cache.json.get("data").characterSFX,void 0!==this.characterID?this.xyloButton.active=!0:this.xyloButton.active=!1,this.helpHand=new G.a(this,this.x,this.y,this.bg),this.helpHand.setDepth(5),void 0!==this.characterID?(this.laughAtDressupCharacter(),this.canIdle=!1):(this.bgMusic=this.sound.add("bgmusic",{loop:!0,volume:.7}),this.bgMusic.play(),this.canIdle=!0),this.toggleMute(this.mute)}},{key:"simulateXlyophonePressed",value:function(){this.pressedXylophone||(this.pressedXylophone=!0,this.playOutro(this.characters[this.characterID]),this.xyloButton.active=!1)}},{key:"playOutro",value:function(t){var e=this;this.xyloButton.animateOut(this,function(){return t.danceThenAnimateClothes(e,function(){return e.restartInteraction()})})}},{key:"playCelebrate",value:function(t){}},{key:"setInteractive",value:function(t,e){var n=this;t.emitter.on("characterClicked",function(){!1===n.paused&&!1===n.charSelected&&(n.canIdle=!1,n.charSelected=!0,n.xyloButton.animateIn(n,function(){return n.handleCharacterClicked(t.ID)}),n.xyloButton.active=!1)},this),e&&t.startDance(this,!1)}},{key:"restartInteraction",value:function(){for(var t=0;t<this.characters.length;t++){var e=this.characters[t];this.setInteractive(e,this.characterID!=t)}this.xyloButton.active=!0,this.canIdle=!0,this.idleTime=0}},{key:"playIdle",value:function(){var t=Math.floor(Math.random()*this.characters.length),e=this.characters[t];this.helpHand.tapHandAtPoint(e.transform.x,e.y)}},{key:"laughAtDressupCharacter",value:function(){for(var t=0;t<this.characters.length;t++){var e=this.characters[t];this.characterID!==t&&e.startGiggle(this)}}},{key:"handleCharacterClicked",value:function(t){var e=this;this.bgEvent=void 0;for(var n=function(){var n=e.characters[i];n.ID==t?(n.toggleFreeze(),e.freezeAnim=n.animations.dance[n.danceIdx],e.freezeTime=n.freezeTime):(n.dancing=!1,e.time.delayedCall(Phaser.Math.Between(0,500),function(){return n.playHappy(e,!1)}))},i=0;i<this.characters.length;i++)n();this.characterID=t,this.endEvent=this.time.delayedCall(2500,function(){return e.handleCharacterSelected()})}},{key:"handleCharacterSelected",value:function(){this.scene.stop("CharacterSelect"),this.scene.start("Dressup",{characterID:this.characterID,freezeAnim:this.freezeAnim,freezeTime:this.freezeTime,mute:this.mute}),this.cleanup()}},{key:"handleGameOver",value:function(){for(var t=0;t<this.characters.length;++t)this.characters[t].kill()}},{key:"cleanup",value:function(){this.charData=null,this.bg.destroy(),this.bg=null,V($(e.prototype),"cleanup",this).call(this)}}])&&W(n.prototype,i),r&&W(n,r),e}();function q(t){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function J(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function K(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Z(t,e,n){return(Z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tt(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function tt(t){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function et(t,e){return(et=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var nt=function(t){function e(t,n,i,r,s,a){var o,c,l;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),c=this,(o=!(l=tt(e).call(this,t,n,i,"blank"))||"object"!==q(l)&&"function"!=typeof l?K(c):l).name=r,t.add.existing(K(o)),o.item=t.add.sprite(n,i,"blank"),o.initX=n,o.initY=i,o.itemDragging=!1,o.charScale=s,o.itemScale=a,o.blocked=!1,o.emitter=new Phaser.Events.EventEmitter,o.setDragEvents(t),o}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&et(t,e)}(e,Phaser.GameObjects.Image),n=e,(i=[{key:"min",value:function(t,e){return t<e?t:e}},{key:"updateItem",value:function(t,e,n,i,r){this.itemID=n,this.freePlace=e;var s=!0===this.freePlace,a=s?"freeplaceItems":"items",o=s?t+".png":"c_"+t+".png";this.item.setTexture(a,o);var c=s?.75:1;this.texWidth=this.item.width*this.charScale*this.itemScale,this.texHeight=this.item.height*this.charScale*this.itemScale,this.iconWidth=this.item.width*c,this.iconHeight=this.item.height*c,this.item.setDisplaySize(this.iconWidth,this.iconHeight),this.name=t}},{key:"update",value:function(t,e){this.itemDragging&&(this.dragTime+=e)}},{key:"toggleInteractive",value:function(t,e){e?(this.setInteractive(),t.input.setDraggable(this),this.itemDragging=!0,this.input.dragDistanceThreshold=50,this.item.alpha=1):this.item.alpha=0}},{key:"setDragEvents",value:function(t){t.input.on("dragstart",function(t,e){e===this&&!1===this.blocked&&(this.forceReturn(),this.itemDragging=!0,this.sqrDragDist=0,this.item.setDisplaySize(this.texWidth,this.texHeight))},this),t.input.on("drag",function(t,e,n,i){if(e===this)if(t.isDown&&!1===this.blocked){var r=this.x-n,s=this.y-i;this.sqrDragDist+=r*r+s*s,this.x=n,this.y=i,this.item.x=n,this.item.y=i}else!0===this.itemDragging&&this.dropItem()},this),t.input.on("dragend",function(t,e){e===this&&this.dropItem()},this)}},{key:"returnToCarousel",value:function(){this.itemDragging=!1,this.forceReturn()}},{key:"dropItem",value:function(){this.item.setDisplaySize(this.iconWidth,this.iconHeight),!1===this.blocked&&this.emitter.emit("touchUp",{x:this.x,y:this.y},this)}},{key:"forceReturn",value:function(){null!=this.returnTween&&(this.returnTween.stop(),this.returnTween=null),this.x=this.initX,this.y=this.initY,this.item.x=this.initX,this.item.y=this.initY}},{key:"destroy",value:function(){null!=this.returnTween&&(this.returnTween.stop(),this.returnTween=null),null!=this.emitter&&(this.emitter.destroy(),this.emitter=null),null!=this.item&&(this.item.destroy(),this.item=null),Z(tt(e.prototype),"destroy",this).call(this)}}])&&J(n.prototype,i),r&&J(n,r),e}();function it(t){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function st(t,e){return!e||"object"!==it(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function at(t,e,n){return(at="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ot(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function ot(t){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ct(t,e){return(ct=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var lt=function(t){function e(t,n,i,r,s,a,o,c,l,u,h,f){var p;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(p=st(this,ot(e).call(this,t,i,r,n))).scene=t,p.emitter=new Phaser.Events.EventEmitter,p.itemDefs=o,p.itemDefs.sort(function(){return Math.random()-.5}),p.maxItems=c,p.padding=l,p.bg=t.add.image(0,0,n),p.bg.setOrigin(.5,.5),p.bg.setDepth(-4),p.displayHeight=a-i,p.setDisplaySize(p.bg.displayWidth,a),p.blocked=!1,p.items=[],p.itemHolder=t.add.group("items"),p.charScale=u,p.worldScale=h,p.itemScale=f,p.setItems(t),p}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ct(t,e)}(e,Phaser.GameObjects.Image),n=e,(i=[{key:"setItems",value:function(t){var e=this;this.index=0;var n=this.padding,i=this.maxItems+1,r=(this.displayHeight-this.padding/2)/i,s=this.min(r,this.displayWidth),a=this.x+.5*s,o=this.y;this.bg.setPosition(a,this.y+.5*this.displayHeight);for(var c=o+r,l=0;l<this.maxItems;l++){var u=new nt(t,a,c,"",this.worldScale,this.itemScale);u.setDisplaySize(s-n,r-n),u.emitter.on("touchUp",this.handleItemReleased,this),this.itemHolder.add(u),this.items.push(u),c+=r}var h=s-2*n,f=r-2*n;this.upButton=new C(t,a,o+3*n,"btnUp",function(){!1===e.blocked&&e.handleUpPressed()}),this.upButton.setDisplaySize(h,f),this.downButton=new C(t,a,c-2.5*n,"btnDown",function(){!1===e.blocked&&e.handleDownPressed()}),this.downButton.setDisplaySize(h,f),this.itemHeight=r,this.itemWidth=s,this.updateItems(0)}},{key:"handleDownPressed",value:function(){this.updateItems(this.index+this.maxItems)}},{key:"handleUpPressed",value:function(){this.updateItems(this.index-this.maxItems)}},{key:"toggleBlocked",value:function(t){this.blocked=t;for(var e=0;e<this.items.length;e++)this.items[e].blocked=this.blocked}},{key:"updateItems",value:function(t){this.index=t;for(var e=0;e<this.maxItems;e++){var n=this.index+e;if(n<this.itemDefs.length){var i=this.itemDefs[this.index+e],r=i.icon;this.items[e].updateItem(r,"sprite"===i.type,n,this.itemWidth-this.padding,this.itemHeight-this.padding),this.items[e].alpha=1,this.items[e].toggleInteractive(this.scene,!0)}else this.items[e].alpha=0,this.items[e].toggleInteractive(this.scene,!1)}this.toggleButtons(t-this.maxItems>=0,t+this.maxItems<this.itemDefs.length)}},{key:"toggleButtons",value:function(t,e){this.downButton.setInteractive(e),this.downButton.alpha=e?1:0,this.upButton.setInteractive(t),this.upButton.alpha=t?1:0}},{key:"handleItemReleased",value:function(t,e){e.itemID<this.itemDefs.length&&this.emitter.emit("itemReleased",t,e)}},{key:"min",value:function(t,e){return t<e?t:e}},{key:"destroy",value:function(){if(void 0!==this.itemHolder.children&&(this.itemHolder.clear(!0),this.itemHolder.destroy()),this.upButton.destroy(),this.downButton.destroy(),this.itemHolder=null,this.upButton=null,this.downButton=null,null!=this.items)for(var t=this.items.length-1;t>=0;t--)this.items[t].destroy(),this.items[t]=null;this.items=null,at(ot(e.prototype),"destroy",this).call(this)}}])&&rt(n.prototype,i),r&&rt(n,r),e}();function ut(t){return(ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ht(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ft(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pt(t,e,n){return(pt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=dt(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function dt(t){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yt(t,e){return(yt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var gt=function(t){function e(t,n,i,r,s,a,o){var c,l,u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),l=this,(c=!(u=dt(e).call(this,t,n,i,"freeplaceItems",r+".png"))||"object"!==ut(u)&&"function"!=typeof u?ft(l):u).name=r,c.itemID=s,c.objID=a,t.add.existing(ft(c)),c.setOrigin(.5),c.setDepth(5),c.itemDraggable=!1,c.charScale=o,c.emitter=new Phaser.Events.EventEmitter,c.texWidth=c.width*c.charScale,c.texHeight=c.height*c.charScale,c.setDisplaySize(c.texWidth,c.texHeight),c}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yt(t,e)}(e,Phaser.GameObjects.Image),n=e,(i=[{key:"update",value:function(t,e){this.itemDraggable&&(this.dragTime+=e)}},{key:"toggleInteractive",value:function(t,e){e?(this.setInteractive(),t.input.setDraggable(this),this.alpha=1,t.input.on("dragstart",function(t,e){if(e===this){var n=e.width/2,i=e.height/2;t.x>=e.x-n&&t.x<=e.x+n&&t.y>=e.y-i&&t.y<=e.y+i&&(e.itemDraggable=!0,e.sqrDragDist=0)}},this),t.input.on("drag",function(t,e,n,i){if(!0===e.itemDraggable){var r=e.x-n,s=e.y-i;e.sqrDragDist+=r*r+s*s,e.x=n,e.y=i}}),t.input.on("dragend",function(t,e){e===this&&e.itemDraggable&&(e.itemDraggable=!1,e.emitter.emit("touchUp",t,this))},this)):this.alpha=0}},{key:"destroy",value:function(){null!=this.emitter&&(this.emitter.destroy(),this.emitter=null),pt(dt(e.prototype),"destroy",this).call(this)}}])&&ht(n.prototype,i),r&&ht(n,r),e}();function mt(t){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function bt(t,e){return!e||"object"!==mt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wt(t,e,n){return(wt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=St(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function St(t){return(St=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ot(t,e){return(Ot=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var kt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),bt(this,St(e).call(this,{key:"Dressup"}))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ot(t,e)}(e,Y),n=e,(i=[{key:"init",value:function(t){wt(St(e.prototype),"init",this).call(this,t),this.characterID=t.characterID,this.freezeTime=t.freezeTime,this.freezeAnim=t.freezeAnim}},{key:"create",value:function(){var t=this;wt(St(e.prototype),"create",this).call(this);var n=this.cache.json.get("data").characters;this.dressupData=this.cache.json.get("data").dressupConfig,console.log(this.dressupData),this.characterSFX=this.cache.json.get("data").characterSFX;var i=this.screenWidth,r=this.screenHeight;this.bg.setTexture(n[this.characterID].bg),this.bg.setOrigin(.5,.5),this.bg.setDisplaySize(i,r),this.bg.setDepth(-5),this.carouselGroup=this.add.group(),this.itemScale=this.dressupData.itemScale,this.worldScale=n[this.characterID].dressupScale,this.dressItems=this.dressupData.items,this.activeSlots=[],this.placedItems=[];var s=this.characterID,a=new b(this,s,n[s].spine,n[s].skin,n[s].animations,n[s].sfx,n[s].slots);a.setTransform(.5*i,.85*r,n[s].scale*this.dressupData.scaleX*this.worldScale*n[s].direction,n[s].scale*this.worldScale*this.dressupData.scaleY,1),a.emitter.on("characterClicked",this.checkForItems,this),a.toggleEyes(!0),this.itemSfxTrigger=3,this.itemCount=0,this.idleSFXIndex=0,this.canPlaySFX=!0,this.idleSFX=[];for(var o=[],c=[],l=0;l<this.characterSFX.length;l++){var u=this.characterSFX[l];if(n[s].sfxPath!==u.name){for(var h=0;h<u.sounds.length;h++)c.push(u.sounds[h]);for(var f=0;f<u.vo.length;f++)o.push(u.vo[f])}else if(void 0!==u.include)for(var p=0;p<u.include.length;p++)o.push(u.include[p])}o.sort(function(){return Math.random()-.5}),c.sort(function(){return Math.random()-.5});for(var d=0,y=0;y<c.length;y++)y%2==0&&(this.idleSFX.push(o[d]),d=(d+1)%o.length),this.idleSFX.push(c[y]);console.log(this.idleSFX),this.charRect=a.clickArea.getBounds(),this.character=a,this.tickBtn=new C(this,i-80,r-80,"tickBtn",function(){return t.handlePlayButtonDown()}),this.carousel=new lt(this,"carousel",80,0,320,r,this.dressItems,this.dressupData.maxItems,this.dressupData.padding,.45*this.dressupData.scaleX,this.worldScale,this.dressupData.itemScale),this.carousel.emitter.on("itemReleased",this.handleItemReleased,this),this.carouselGroup.add(this.carousel),this.character.freeze(this,this.freezeAnim,this.freezeTime),this.itemGroup=this.add.group()}},{key:"handlePaused",value:function(){wt(St(e.prototype),"handlePaused",this).call(this),this.tickBtn.blocked=!0,this.carousel.toggleBlocked(!0)}},{key:"handleResumed",value:function(){wt(St(e.prototype),"handleResumed",this).call(this),this.tickBtn.blocked=!1,this.carousel.toggleBlocked(!1)}},{key:"checkForItems",value:function(t,e){var n=e.x,i=e.y,r=this.character.getSlotFromPosition(n,i);if(null!==r)if(Array.isArray(r))for(var s=0;s<r.length;s++)this.setAttachment(null,r[s],null);else this.setAttachment(null,r,null)}},{key:"handleXyloButtonDown",value:function(){this.scene.start("CharacterSelect",{characterID:this.characterID,activeSlots:this.activeSlots,placedItems:this.placedItems,freezeAnim:this.freezeAnim,freezeTime:this.freezeTime,mute:this.mute}),this.cleanup()}},{key:"handlePlayButtonDown",value:function(){this.scene.start("CharacterSelect",{characterID:this.characterID,activeSlots:this.activeSlots,placedItems:this.placedItems,freezeAnim:this.freezeAnim,freezeTime:this.freezeTime,mute:this.mute}),this.time.delayedCall(100,this.cleanup)}},{key:"handleItemReleased",value:function(t,e){var n=this.dressItems[e.itemID];if(this.pointInBounds(this.charRect,t)||e.sqrDragDist<=5)if(this.onItemPlaced(),"spine"===n.type)if(void 0!==n.slots)for(var i=0;i<n.slots.length;i++)this.setAttachment(n.icon,n.slots[i],n.regions[i],n.overrideSlot);else this.setAttachment(n.icon,n.slot,n.region);else{var r=e.sqrDragDist<=5,s=t.x,a=t.y;if(r){var o=this.character.randomPointInBounds();s=o.x,a=o.y}this.addSprite(n.icon,e.itemID,s,a,.65)}e.returnToCarousel()}},{key:"onItemPlaced",value:function(){var t=this;this.sound.play("pop"),this.itemCount++,this.itemCount>=this.itemSfxTrigger&&this.canPlaySFX&&(this.itemCount=0,this.sound.play(this.idleSFX[this.idleSFXIndex]),this.idleSFXIndex=(this.idleSFXIndex+1)%this.idleSFX.length,this.canPlaySFX=!1,this.time.delayedCall(2e3,function(){return t.onSfxAvailable()},this))}},{key:"onSfxAvailable",value:function(){this.canPlaySFX=!0}},{key:"setAttachment",value:function(t,e,n,i){if(this.character.setAttachment(e,n),this.activeSlots.length>0)for(var r=0;r<this.activeSlots.length;r++)if(this.activeSlots[r].slot===e)return null!==n?(this.activeSlots[r].item=t,this.activeSlots[r].attachment=n,void(void 0!==i&&(this.activeSlots[r].overrideSlot.noSprite=i.slot!==e,this.activeSlots[r].overrideSlot.spriteName=i.sprite))):void this.activeSlots.splice(r,1);void 0!==i?this.activeSlots.push({slot:e,item:t,attachment:n,overrideSlot:{noSprite:e!==i.slot,spriteName:i.sprite}}):this.activeSlots.push({slot:e,item:t,attachment:n})}},{key:"addSprite",value:function(t,e,n,i){var r=this.character.getNormalizedPosition(n,i),s=Math.round(Date.now()*Math.random()),a=this.worldScale*this.dressupData.itemScale;console.log("dressup item scale --\x3e "+a);var o=new gt(this,n,i,t,e,s,a);if(o.emitter.on("touchUp",this.spriteReleased,this),o.toggleInteractive(this,!0),o.freePlace=!0,this.character.addItem(this,o),this.placedItems.push({sprite:t,objID:s,x:r.x,y:r.y}),this.itemGroup.add(o),this.placedItems.length>=20){var c=this.itemGroup.getChildren()[0];c.destroy(),c=null,this.placedItems.shift()}}},{key:"spriteReleased",value:function(t,e){var n=this;if(0==this.pointInBounds(this.charRect,t))this.tweens.add({targets:e,displayWidth:0,duration:200,ease:"Back.easeIn",onEnd:function(){for(var t=e.objID,i=0;i<n.placedItems.length;i++){if(n.placedItems[i].objID==t)return n.itemGroup.remove(i),n.placedItems.splice(i,1),void e.destroy()}}});else{console.log(e.objID+" repositioned");for(var i={x:e.x,y:e.y},r=this.character.getNormalizedPosition(i.x,i.y),s=e.objID,a=0;a<this.placedItems.length;a++){if(this.placedItems[a].objID==s)return this.placedItems[a].x=r.x,void(this.placedItems[a].y=r.y)}}}},{key:"pointInBounds",value:function(t,e){var n=e.x,i=e.y,r=t.x,s=t.y,a=t.x+t.width,o=t.y+t.height;return!(n<r||n>a)&&!(i<s||i>o)}},{key:"cleanup",value:function(){this.character.destroy(),this.character=null,this.carousel.destroy(),this.carousel=null,this.tickBtn.destroy(),this.tickBtn=null,this.carouselGroup.clear(!0),this.carouselGroup.destroy(),this.carouselGroup=null,this.itemGroup.clear(!0),this.itemGroup.destroy(),this.itemGroup=null,this.activeSlots=null,this.placedItems=null,this.dressItems=null,this.dressupData=null,wt(St(e.prototype),"cleanup",this).call(this)}}])&&vt(n.prototype,i),r&&vt(n,r),e}();function Pt(t){return(Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ct(t,e){return!e||"object"!==Pt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _t(t,e,n){return(_t="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Dt(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Dt(t){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function It(t,e){return(It=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var jt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ct(this,Dt(e).call(this,{key:"Title"}))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&It(t,e)}(e,Phaser.Scene),n=e,(i=[{key:"init",value:function(){}},{key:"preload",value:function(){}},{key:"create",value:function(){var t=this,e=this.cameras.main.width,n=this.cameras.main.height;this.titleImages=[],this.titleConfig=this.cache.json.get("data").titleConfig;for(var i=this.titleConfig.images.length,r=0;r<i;r++){var s=this.titleConfig.images[r].x,a=this.titleConfig.images[r].y,o=this.titleConfig.images[r].scale,c=this.add.sprite(s,a,this.titleConfig.images[r].name);c.scaleX=o,c.scaleY=o,this.titleImages.push(c)}var l=this.titleImages[this.titleImages.length-1],u=l.scaleX,h=l.scaleY;l.scaleX=0,l.scaleY=0,this.tweens.add({targets:l,scaleX:u,scaleY:h,easeParams:[.9,.25],duration:900,delay:100,ease:"Elastic.easeOut"});var f=new C(this,e/2,n-120,"startBtn",function(){return t.handlePlayButtonDown()});f.alpha=0,this.tweens.add({targets:f,alpha:1,duration:500,delay:1e3,ease:"Quad.easeOut"});var p=this.add.bitmapText(e/2,20+n/2,this.titleConfig.title.font,this.titleConfig.title.text);p.setFontSize(this.titleConfig.title.size),p.setCenterAlign(),p.setOrigin(.5)}},{key:"handlePlayButtonDown",value:function(){this.scene.start("CharacterSelect")}},{key:"update",value:function(){}},{key:"render",value:function(){}},{key:"shutdown",value:function(){}},{key:"destroy",value:function(){this.titleImages.destroy(),this.titleImages=null,_t(Dt(e.prototype),"destroy",this).call(this)}}])&&xt(n.prototype,i),r&&xt(n,r),e}(),Tt=n(26),At=1136,Bt=640,Et={mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,max:{width:1136,height:640}},Mt=1,Rt=1,Ht=Phaser.WEBGL,Xt=!1,Ft=!1,zt=!1,Yt="gameHolder",Gt="display: block; margin: 0 auto;",Lt="#000000",Wt=!1,Nt=20,Vt={default:!1},$t={path:"assets/"},Qt={global:[],scene:[{key:"SpineWebGLPlugin",plugin:SpineWebGLPlugin,start:!0,sceneKey:"spine"}]},Ut=Object.values(i);function qt(){return new Phaser.Game(r)}n.d(e,"boot",function(){return qt}),qt()}]);
//# sourceMappingURL=app-3be989e4e15f0142b832.bundle.js.map